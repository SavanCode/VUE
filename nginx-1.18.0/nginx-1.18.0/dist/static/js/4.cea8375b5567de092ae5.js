webpackJsonp([4],{"8Icl":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("woOf"),n=r.n(a),i=r("zFqy"),s=function(e){return Object(i.a)({url:"records_api/records/add",method:"post",data:e})},o=function(e){return Object(i.a)({url:"records_api/records/delete/"+e,method:"post"})},c=function(e){return Object(i.a)({url:"records_api/records/update",method:"post",data:e})},l=function(e){return Object(i.a)({url:"records_api/records/list",method:"post",data:e})},u=r("yt7g"),d=r("PJh5"),p=r.n(d),g={data:function(){return{query:{},listForm:{},listData:[],listOption:{tip:!1,index:!1,stripe:!0,border:!0,height:650,align:"center",column:[{label:"借阅编号",prop:"Record_id",span:24,searchSpan:12,disabled:!0,rules:[{required:!1,message:"请输入借阅编号",trigger:"blur"}]},{label:"图书编号",prop:"Book_id",span:12,search:!0,searchSpan:12,rules:[{required:!0,message:"请输入图书编号",trigger:"blur"}]},{label:"书名",prop:"Book_name",span:12,search:!0,searchSpan:12,rules:[{required:!0,message:"请输入书名",trigger:"blur"}]},{label:"作者",prop:"Author",span:12,rules:[{required:!0,message:"请输入作者",trigger:"blur"}]},{label:"读者编号",prop:"User_id",search:!0,searchSpan:12,span:12,rules:[{required:!0,message:"请输入借书用户编号",trigger:"blur"}]},{label:"借书日期",prop:"Borrow_date",width:155,span:12,type:"date",disabled:!0,format:"yyyy-MM-dd",valueFormat:"yyyy-MM-dd"},{label:"预计归还日期",prop:"Exp_return_date",width:155,span:12,type:"date",disabled:!0,format:"yyyy-MM-dd",valueFormat:"yyyy-MM-dd"},{label:"实际归还日期",prop:"Act_return_date",width:155,span:12,type:"date",format:"yyyy-MM-dd",valueFormat:"yyyy-MM-dd"},{label:"罚款",prop:"Penalty",span:12,rules:[{required:!0,message:"请输入罚款金额",trigger:"blur"}]}]},loading:!0,page:{total:0,pageSize:20,currentPage:1}}},created:function(){this.getList()},methods:{getList:function(e){var t=this;this.loading=!0,l(n()({page:{current:this.page.currentPage,size:this.page.pageSize}},this.query)).then(function(e){var r=e.data;t.page.total=r.total,t.listData=r.records}).catch(function(){}).finally(function(){t.loading=!1})},listAdd:function(e,t,r){var a=this;s(e).then(function(){r(),a.list(a.page),Object(u.b)()}).catch(function(){}).finally(function(){t()})},listDelete:function(e){var t=this;this.$confirm("是否删除该条数据？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return o(e.Record_id)}).then(function(){t.getList(t.page),Object(u.b)()}).catch(function(){})},listUpdate:function(e,t,r,a){var n=this;c(e).then(function(){a(),n.getList(n.page),Object(u.b)()}).catch(function(){}).finally(function(){r()})},refreshChange:function(){this.getList(this.page)},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e,this.getList(this.page)},searchChange:function(e,t){this.query=e,this.getList(this.page),t()},searchReset:function(){this.query={},this.getList(this.page)},beforeOpen:function(e,t){if(["add"].includes(t)){p()().format("YYYY-MM-DD HH:mm:ss");setTimeout(function(){},300),console.log("add")}else["edit","view"].includes(t)&&console.log("edit view");e()}}},h={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-col",{attrs:{span:24}},[r("base-card",[r("avue-crud",{ref:"crud",attrs:{option:e.listOption,data:e.listData,page:e.page,"table-loading":e.loading,beforeOpen:e.beforeOpen},on:{"on-load":e.getList,"row-save":e.listAdd,"row-del":e.listDelete,"row-update":e.listUpdate,"search-reset":e.searchReset,"search-change":e.searchChange,"refresh-change":e.refreshChange,"size-change":e.sizeChange,"current-change":e.currentChange},model:{value:e.listForm,callback:function(t){e.listForm=t},expression:"listForm"}})],1)],1)},staticRenderFns:[]};var f=r("VU/8")(g,h,!1,function(e){r("BPIx")},null,null);t.default=f.exports},BPIx:function(e,t){}});
//# sourceMappingURL=4.cea8375b5567de092ae5.js.map