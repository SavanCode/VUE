webpackJsonp([7],{"2EXO":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("woOf"),i=a.n(n),r=a("aK6G"),s=a("Ju7D"),o=a("yt7g"),c={data:function(){return{query:{},listForm:{},listData:[],listOption:{tip:!1,index:!1,stripe:!0,border:!0,height:650,align:"center",column:[{label:"书本编号",prop:"Book_id",span:24,search:!0,searchSpan:12,disabled:!0,rules:[{required:!1,message:"请选择书本编号",trigger:"blur"}]},{label:"书名",prop:"Book_name",span:12,search:!0,searchSpan:12,rules:[{required:!0,message:"请选择属性",trigger:"blur"}]},{label:"作者",prop:"Author",search:!0,searchSpan:12,span:12,rules:[{required:!0,message:"请输入作者",trigger:"blur"}]},{label:"类型",prop:"Type_id",span:12,search:!0,searchSpan:12,type:"tree",dicData:[],defaultExpandAll:!0,rules:[{message:"请选择书本类型",trigger:"cilck"}]},{label:"出版社",prop:"Pub_company",span:12,rules:[{required:!0,message:"请输入作者",trigger:"blur"}]},{label:"内容摘要",prop:"Brief",width:200,span:24,type:"textarea",overHidden:!0,rules:[{max:380,message:"最多输入380个字符",trigger:"blur"}]},{label:"出版时间",prop:"PUB_DATE",width:155,span:12,disabled:!0,type:"date",format:"yyyy-MM-dd HH:mm:ss",valueFormat:"yyyy-MM-dd HH:mm:ss"}]},loading:!0,page:{total:0,pageSize:20,currentPage:1}}},created:function(){this.getList(),this.getBookType()},methods:{getList:function(e){var t=this;this.loading=!0,r.a.list(i()({page:{current:this.page.currentPage,size:this.page.pageSize}},this.query)).then(function(e){var a=e.data;t.page.total=a.total,t.listData=a.records}).catch(function(){}).finally(function(){t.loading=!1})},getBookType:function(){var e=this;s.a.bookTypeDictionary().then(function(t){e.findObject(e.listOption.column,"Type_id").dicData=t.data}).catch(function(){})},listAdd:function(e,t,a){var n=this;r.a.add(e).then(function(){a(),Object(o.b)(),n.list(n.page)}).catch(function(){}).finally(function(){t()})},listDelete:function(e){var t=this;this.$confirm("是否删除该条数据？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return r.a.delete(e.Book_id)}).then(function(){Object(o.b)(),t.getList(t.page)}).catch(function(){})},listUpdate:function(e,t,a,n){var i=this;r.a.update(e).then(function(){n(),i.getList(i.page),Object(o.b)()}).catch(function(e){console.log(e)}).finally(function(){a()})},refreshChange:function(){this.getList(this.page)},currentChange:function(e){console.log(e),this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e,this.getList(this.page)},searchChange:function(e,t){this.query=e,this.getList(this.page),t()},searchReset:function(){this.query={},this.getList(this.page)}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-col",{attrs:{span:24}},[a("base-card",[a("avue-crud",{ref:"crud",attrs:{option:e.listOption,data:e.listData,page:e.page,"table-loading":e.loading},on:{"on-load":e.getList,"row-save":e.listAdd,"row-del":e.listDelete,"row-update":e.listUpdate,"search-reset":e.searchReset,"search-change":e.searchChange,"refresh-change":e.refreshChange,"size-change":e.sizeChange,"current-change":e.currentChange},model:{value:e.listForm,callback:function(t){e.listForm=t},expression:"listForm"}})],1)],1)},staticRenderFns:[]};var u=a("VU/8")(c,l,!1,function(e){a("Q21S")},null,null);t.default=u.exports},Q21S:function(e,t){}});
//# sourceMappingURL=7.21c337bedad10e7485db.js.map